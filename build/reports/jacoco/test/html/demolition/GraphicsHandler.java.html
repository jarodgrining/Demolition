<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GraphicsHandler.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Demolition</a> &gt; <a href="index.source.html" class="el_package">demolition</a> &gt; <span class="el_source">GraphicsHandler.java</span></div><h1>GraphicsHandler.java</h1><pre class="source lang-java linenums">package demolition;

import processing.core.*;
import processing.data.*;
import processing.event.*;
import java.util.List;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.Scanner;
import java.util.Stack;
import java.util.Map;
import java.util.HashMap;
import java.io.File;
import java.io.FileNotFoundException;

public class GraphicsHandler {

<span class="fc" id="L18">    public static final int[] ORANGE = {239, 129, 0};</span>
<span class="fc" id="L19">    public static final int[] GREEN = {75, 105, 47};</span>

    public App app;

    public Map&lt;Direction, ArrayList&lt;PImage&gt;&gt; redFrames, yellowFrames;
    public List&lt;PImage&gt; bombFrames;
    public Map&lt;Tile, PImage&gt; tileImages;
    public Map&lt;Direction, PImage&gt; explosionFrames;

    public PImage livesIcon, timeIcon;

    public Coordinates timeCoords;
    public Stack&lt;Coordinates&gt; redrawTiles;

<span class="fc" id="L33">    public GraphicsHandler(App app) {</span>
<span class="fc" id="L34">        this.app = app;</span>
<span class="fc" id="L35">        redrawTiles = new Stack&lt;Coordinates&gt;();</span>
<span class="fc" id="L36">    }</span>

    public void drawLevel(Tile[][] levelMap, Player player) {

<span class="fc" id="L40">        app.fill(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L41">        app.stroke(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L42">        app.rect(0, 0, App.WIDTH, App.HEIGHT);</span>

<span class="fc bfc" id="L44" title="All 2 branches covered.">        for (int i = 0; i &lt; levelMap.length; i++)</span>
<span class="fc bfc" id="L45" title="All 2 branches covered.">            for (int j = 0; j &lt; levelMap[0].length; j++)</span>
<span class="fc" id="L46">                app.image(tileImages.get(levelMap[i][j]), j*App.TILESIZE, i*App.TILESIZE + App.UPPEROFFSET);</span>

        // do upper ui

<span class="fc" id="L50">        int xLives = (int) (App.WIDTH * 4 / 15);</span>
<span class="fc" id="L51">        int xTime = (int) (App.WIDTH * 8 / 15);</span>
<span class="fc" id="L52">        int yIcons = (int) (App.UPPEROFFSET / 4);</span>

<span class="fc" id="L54">        app.image(livesIcon, xLives, yIcons);</span>
<span class="fc" id="L55">        app.image(timeIcon, xTime, yIcons);</span>

<span class="fc" id="L57">        app.fill(0, 0, 0);</span>
<span class="fc" id="L58">        app.text(player.lives, xLives + livesIcon.width + 5, yIcons + (int) ((livesIcon.height + App.FONTSIZE) / 2));</span>

<span class="fc" id="L60">        timeCoords = new Coordinates(xTime + timeIcon.width + 5, yIcons + (int) ((timeIcon.height + App.FONTSIZE) / 2));</span>

<span class="fc" id="L62">    }</span>

    public void handleAllGraphics(GameState gameState) {
<span class="fc" id="L65">        redrawTiles(gameState.levelMap);</span>
<span class="fc" id="L66">        drawPlayer(gameState.player);</span>
<span class="fc" id="L67">        drawEnemies(gameState.enemies);</span>
<span class="fc" id="L68">        drawBombs(gameState.bombs);</span>
<span class="fc" id="L69">        drawExplosions(gameState.explosions);</span>
<span class="fc" id="L70">        drawTime(gameState.timeLeft);</span>
<span class="fc" id="L71">    }</span>

    public void redrawTiles(Tile[][] levelMap) {

<span class="fc" id="L75">        app.fill(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L76">        app.stroke(ORANGE[0], ORANGE[1], ORANGE[2]);</span>

        Coordinates tempCoords;
<span class="pc bpc" id="L79" title="1 of 2 branches missed.">        while (redrawTiles.size() &gt; 0) {</span>
<span class="nc" id="L80">            tempCoords = redrawTiles.pop();</span>

<span class="nc bnc" id="L82" title="All 2 branches missed.">            if (tempCoords.y &lt; 0) {</span>
<span class="nc" id="L83">                app.rect(tempCoords.x * App.TILESIZE, tempCoords.y * App.TILESIZE + App.UPPEROFFSET, App.TILESIZE, App.TILESIZE);</span>
            } else {
<span class="nc" id="L85">                app.image(tileImages.get(levelMap[tempCoords.y][tempCoords.x]), tempCoords.x * App.TILESIZE, tempCoords.y * App.TILESIZE + App.UPPEROFFSET);</span>
            }
        }

<span class="fc" id="L89">    }</span>

    public void drawPlayer(Player player) {
<span class="fc" id="L92">        addCharRedraw(player.draw(app));</span>
<span class="fc" id="L93">    }</span>

    public void drawEnemies(List&lt;Character&gt; enemies) {
<span class="fc bfc" id="L96" title="All 2 branches covered.">        for (Character enemy : enemies) {</span>
<span class="fc" id="L97">            addCharRedraw(enemy.draw(app));</span>
<span class="fc" id="L98">        }</span>
<span class="fc" id="L99">    }</span>

    public void drawBombs(List&lt;Bomb&gt; bombs) {
<span class="pc bpc" id="L102" title="1 of 2 branches missed.">        for (Bomb bomb : bombs) {</span>
<span class="nc" id="L103">            redrawTiles.push(bomb.draw(app));</span>
<span class="nc" id="L104">        }</span>
<span class="fc" id="L105">    }</span>

    public void drawExplosions(List&lt;Explosion&gt; explosions) {
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">        for (Explosion explosion : explosions) {</span>
<span class="nc" id="L109">            redrawTiles.push(explosion.draw(app));</span>
<span class="nc" id="L110">        }</span>
<span class="fc" id="L111">    }</span>

    public void drawTime(int timeLeft) {
<span class="fc" id="L114">        app.fill(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L115">        app.stroke(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L116">        app.rect(timeCoords.x, timeCoords.y - App.FONTSIZE, App.WIDTH, App.FONTSIZE);</span>
<span class="fc" id="L117">        app.fill(0, 0, 0);</span>
<span class="fc" id="L118">        app.text((int) (timeLeft/60), timeCoords.x, timeCoords.y);</span>
<span class="fc" id="L119">    }</span>

    public void addCharRedraw(Coordinates coords) {
<span class="fc" id="L122">        redrawTiles.push(coords);</span>
<span class="fc" id="L123">        Coordinates upperCoords = new Coordinates(coords.x, coords.y-1);</span>
<span class="fc" id="L124">        redrawTiles.push(upperCoords);</span>
<span class="fc" id="L125">    }</span>

    public void displayWin() {
<span class="fc" id="L128">        app.fill(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L129">        app.stroke(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L130">        app.rect(0, 0, App.WIDTH, App.HEIGHT);</span>
<span class="fc" id="L131">        app.fill(0, 0, 0);</span>
<span class="fc" id="L132">        app.text(&quot;YOU WIN&quot;, (int) (App.WIDTH * 8 / 20), (int) ((App.HEIGHT - App.FONTSIZE) / 2));</span>
<span class="fc" id="L133">    }</span>

    public void displayLoss() {
<span class="fc" id="L136">        app.fill(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L137">        app.stroke(ORANGE[0], ORANGE[1], ORANGE[2]);</span>
<span class="fc" id="L138">        app.rect(0, 0, App.WIDTH, App.HEIGHT);</span>
<span class="fc" id="L139">        app.fill(0, 0, 0);</span>
<span class="fc" id="L140">        app.text(&quot;GAME OVER&quot;, (int) (App.WIDTH * 7 / 20), (int) ((App.HEIGHT - App.FONTSIZE) / 2));</span>
<span class="fc" id="L141">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>